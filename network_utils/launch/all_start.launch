<launch>
    <!-- 定义参数 -->
    <arg name="drone1_ip" default="192.168.1.1"/>
    <arg name="drone2_ip" default="192.168.1.2"/>
    <arg name="drone3_ip" default="192.168.1.3"/>
    <arg name="user" default="user"/>
    <arg name="password" default="password"/>
    <arg name="env_loader" default="/path/to/env/setup.bash"/>
    <arg name="num_drones" default="3"/>
    <arg name="base_ip" default="192.168.1."/>
    <arg name="base_port" default="5555"/>
    <arg name="offset_multiplier" default="1.5"/>

    <!-- 定义所有无人机的机器信息 -->
    <machine name="drone1" address="$(arg drone1_ip)" user="$(arg user)" password="$(arg password)" env-loader="$(arg env_loader)"/>
    <machine name="drone2" address="$(arg drone2_ip)" user="$(arg user)" password="$(arg password)" env-loader="$(arg env_loader)"/>
    <machine name="drone3" address="$(arg drone3_ip)" user="$(arg user)" password="$(arg password)" env-loader="$(arg env_loader)"/>
    <!-- 可以根据实际情况添加更多无人机 -->

    <!-- 启动 drone1 -->
    <include file="$(find network_utils)/launch/start_drone.launch">
        <arg name="drone_id" value="1"/>
        <arg name="num_drones" value="$(arg num_drones)"/>
        <arg name="base_ip" value="$(arg base_ip)"/>
        <arg name="base_port" value="$(arg base_port)"/>
        <arg name="offset_multiplier" value="$(arg offset_multiplier)"/>
        <arg name="odom_topic" value="/vins_estimator/odometry"/>
        <arg name="vins_topic" value="/vins_estimator/odometry"/>
        <machine name="drone1"/>
    </include>

    <!-- 启动 drone2 -->
    <include file="$(find my_package)/launch/start_drone.launch">
        <arg name="drone_id" value="2"/>
        <arg name="num_drones" value="$(arg num_drones)"/>
        <arg name="base_ip" value="$(arg base_ip)"/>
        <arg name="base_port" value="$(arg base_port)"/>
        <arg name="offset_multiplier" value="$(arg offset_multiplier)"/>
        <arg name="odom_topic" value="/vins_estimator/odometry"/>
        <arg name="vins_topic" value="/vins_estimator/odometry"/>
        <machine name="drone2"/>
    </include>

    <!-- 启动 drone3 -->
    <include file="$(find my_package)/launch/start_drone.launch">
        <arg name="drone_id" value="3"/>
        <arg name="num_drones" value="$(arg num_drones)"/>
        <arg name="base_ip" value="$(arg base_ip)"/>
        <arg name="base_port" value="$(arg base_port)"/>
        <arg name="offset_multiplier" value="$(arg offset_multiplier)"/>
        <arg name="odom_topic" value="/vins_estimator/odometry"/>
        <arg name="vins_topic" value="/vins_estimator/odometry"/>
        <machine name="drone3"/>
    </include>
</launch>
